import{r as s,j as p,c as K}from"./index-BYcoJFgG.js";import{j as U,c as J,e as F,u as Q,b as Z,R as ee,A as te,a as C,P as ne,i as oe,D as re,C as se,x as ae}from"./index-DL_SWt5J.js";import{u as D,b as ie}from"./index-OICOeeHB.js";import{P as ce}from"./index-qpBqXqUl.js";function le(e,t){return s.useReducer((n,o)=>t[n][o]??n,e)}var L=e=>{const{present:t,children:n}=e,o=ue(t),r=typeof n=="function"?n({present:o.isPresent}):s.Children.only(n),i=D(o.ref,de(r));return typeof n=="function"||o.isPresent?s.cloneElement(r,{ref:i}):null};L.displayName="Presence";function ue(e){const[t,n]=s.useState(),o=s.useRef(null),r=s.useRef(e),i=s.useRef("none"),c=e?"mounted":"unmounted",[v,a]=le(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const u=A(o.current);i.current=v==="mounted"?u:"none"},[v]),U(()=>{const u=o.current,l=r.current;if(l!==e){const m=i.current,d=A(u);e?a("MOUNT"):d==="none"||(u==null?void 0:u.display)==="none"?a("UNMOUNT"):a(l&&m!==d?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,a]),U(()=>{if(t){let u;const l=t.ownerDocument.defaultView??window,f=d=>{const T=A(o.current).includes(d.animationName);if(d.target===t&&T&&(a("ANIMATION_END"),!r.current)){const h=t.style.animationFillMode;t.style.animationFillMode="forwards",u=l.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=h)})}},m=d=>{d.target===t&&(i.current=A(o.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{l.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else a("ANIMATION_END")},[t,a]),{isPresent:["mounted","unmountSuspended"].includes(v),ref:s.useCallback(u=>{o.current=u?getComputedStyle(u):null,n(u)},[])}}function A(e){return(e==null?void 0:e.animationName)||"none"}function de(e){var o,r;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var[O,He]=J("Tooltip",[F]),M=F(),G="TooltipProvider",pe=700,_="tooltip.open",[fe,I]=O(G),W=e=>{const{__scopeTooltip:t,delayDuration:n=pe,skipDelayDuration:o=300,disableHoverableContent:r=!1,children:i}=e,c=s.useRef(!0),v=s.useRef(!1),a=s.useRef(0);return s.useEffect(()=>{const u=a.current;return()=>window.clearTimeout(u)},[]),p.jsx(fe,{scope:t,isOpenDelayedRef:c,delayDuration:n,onOpen:s.useCallback(()=>{window.clearTimeout(a.current),c.current=!1},[]),onClose:s.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(()=>c.current=!0,o)},[o]),isPointerInTransitRef:v,onPointerInTransitChange:s.useCallback(u=>{v.current=u},[]),disableHoverableContent:r,children:i})};W.displayName=G;var R="Tooltip",[me,N]=O(R),z=e=>{const{__scopeTooltip:t,children:n,open:o,defaultOpen:r,onOpenChange:i,disableHoverableContent:c,delayDuration:v}=e,a=I(R,e.__scopeTooltip),u=M(t),[l,f]=s.useState(null),m=Q(),d=s.useRef(0),x=c??a.disableHoverableContent,T=v??a.delayDuration,h=s.useRef(!1),[y,g]=Z({prop:o,defaultProp:r??!1,onChange:H=>{H?(a.onOpen(),document.dispatchEvent(new CustomEvent(_))):a.onClose(),i==null||i(H)},caller:R}),w=s.useMemo(()=>y?h.current?"delayed-open":"instant-open":"closed",[y]),P=s.useCallback(()=>{window.clearTimeout(d.current),d.current=0,h.current=!1,g(!0)},[g]),E=s.useCallback(()=>{window.clearTimeout(d.current),d.current=0,g(!1)},[g]),k=s.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>{h.current=!0,g(!0),d.current=0},T)},[T,g]);return s.useEffect(()=>()=>{d.current&&(window.clearTimeout(d.current),d.current=0)},[]),p.jsx(ee,{...u,children:p.jsx(me,{scope:t,contentId:m,open:y,stateAttribute:w,trigger:l,onTriggerChange:f,onTriggerEnter:s.useCallback(()=>{a.isOpenDelayedRef.current?k():P()},[a.isOpenDelayedRef,k,P]),onTriggerLeave:s.useCallback(()=>{x?E():(window.clearTimeout(d.current),d.current=0)},[E,x]),onOpen:P,onClose:E,disableHoverableContent:x,children:n})})};z.displayName=R;var j="TooltipTrigger",$=s.forwardRef((e,t)=>{const{__scopeTooltip:n,...o}=e,r=N(j,n),i=I(j,n),c=M(n),v=s.useRef(null),a=D(t,v,r.onTriggerChange),u=s.useRef(!1),l=s.useRef(!1),f=s.useCallback(()=>u.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),p.jsx(te,{asChild:!0,...c,children:p.jsx(ce.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...o,ref:a,onPointerMove:C(e.onPointerMove,m=>{m.pointerType!=="touch"&&!l.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),l.current=!0)}),onPointerLeave:C(e.onPointerLeave,()=>{r.onTriggerLeave(),l.current=!1}),onPointerDown:C(e.onPointerDown,()=>{r.open&&r.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:C(e.onFocus,()=>{u.current||r.onOpen()}),onBlur:C(e.onBlur,r.onClose),onClick:C(e.onClick,r.onClose)})})});$.displayName=j;var S="TooltipPortal",[ve,xe]=O(S,{forceMount:void 0}),B=e=>{const{__scopeTooltip:t,forceMount:n,children:o,container:r}=e,i=N(S,t);return p.jsx(ve,{scope:t,forceMount:n,children:p.jsx(L,{present:n||i.open,children:p.jsx(ne,{asChild:!0,container:r,children:o})})})};B.displayName=S;var b="TooltipContent",V=s.forwardRef((e,t)=>{const n=xe(b,e.__scopeTooltip),{forceMount:o=n.forceMount,side:r="top",...i}=e,c=N(b,e.__scopeTooltip);return p.jsx(L,{present:o||c.open,children:c.disableHoverableContent?p.jsx(Y,{side:r,...i,ref:t}):p.jsx(he,{side:r,...i,ref:t})})}),he=s.forwardRef((e,t)=>{const n=N(b,e.__scopeTooltip),o=I(b,e.__scopeTooltip),r=s.useRef(null),i=D(t,r),[c,v]=s.useState(null),{trigger:a,onClose:u}=n,l=r.current,{onPointerInTransitChange:f}=o,m=s.useCallback(()=>{v(null),f(!1)},[f]),d=s.useCallback((x,T)=>{const h=x.currentTarget,y={x:x.clientX,y:x.clientY},g=Ce(y,h.getBoundingClientRect()),w=be(y,g),P=we(T.getBoundingClientRect()),E=Ee([...w,...P]);v(E),f(!0)},[f]);return s.useEffect(()=>()=>m(),[m]),s.useEffect(()=>{if(a&&l){const x=h=>d(h,l),T=h=>d(h,a);return a.addEventListener("pointerleave",x),l.addEventListener("pointerleave",T),()=>{a.removeEventListener("pointerleave",x),l.removeEventListener("pointerleave",T)}}},[a,l,d,m]),s.useEffect(()=>{if(c){const x=T=>{const h=T.target,y={x:T.clientX,y:T.clientY},g=(a==null?void 0:a.contains(h))||(l==null?void 0:l.contains(h)),w=!Pe(y,c);g?m():w&&(m(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[a,l,c,u,m]),p.jsx(Y,{...e,ref:i})}),[Te,ge]=O(R,{isInside:!1}),ye=ie("TooltipContent"),Y=s.forwardRef((e,t)=>{const{__scopeTooltip:n,children:o,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:c,...v}=e,a=N(b,n),u=M(n),{onClose:l}=a;return s.useEffect(()=>(document.addEventListener(_,l),()=>document.removeEventListener(_,l)),[l]),s.useEffect(()=>{if(a.trigger){const f=m=>{const d=m.target;d!=null&&d.contains(a.trigger)&&l()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[a.trigger,l]),p.jsx(re,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:f=>f.preventDefault(),onDismiss:l,children:p.jsxs(se,{"data-state":a.stateAttribute,...u,...v,ref:t,style:{...v.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(ye,{children:o}),p.jsx(Te,{scope:n,isInside:!0,children:p.jsx(ae,{id:a.contentId,role:"tooltip",children:r||o})})]})})});V.displayName=b;var q="TooltipArrow",X=s.forwardRef((e,t)=>{const{__scopeTooltip:n,...o}=e,r=M(n);return ge(q,n).isInside?null:p.jsx(oe,{...r,...o,ref:t})});X.displayName=q;function Ce(e,t){const n=Math.abs(t.top-e.y),o=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,o,r,i)){case i:return"left";case r:return"right";case n:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function be(e,t,n=5){const o=[];switch(t){case"top":o.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":o.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":o.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":o.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return o}function we(e){const{top:t,right:n,bottom:o,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:o},{x:r,y:o}]}function Pe(e,t){const{x:n,y:o}=e;let r=!1;for(let i=0,c=t.length-1;i<t.length;c=i++){const v=t[i],a=t[c],u=v.x,l=v.y,f=a.x,m=a.y;l>o!=m>o&&n<(f-u)*(o-l)/(m-l)+u&&(r=!r)}return r}function Ee(e){const t=e.slice();return t.sort((n,o)=>n.x<o.x?-1:n.x>o.x?1:n.y<o.y?-1:n.y>o.y?1:0),Re(t)}function Re(e){if(e.length<=1)return e.slice();const t=[];for(let o=0;o<e.length;o++){const r=e[o];for(;t.length>=2;){const i=t[t.length-1],c=t[t.length-2];if((i.x-c.x)*(r.y-c.y)>=(i.y-c.y)*(r.x-c.x))t.pop();else break}t.push(r)}t.pop();const n=[];for(let o=e.length-1;o>=0;o--){const r=e[o];for(;n.length>=2;){const i=n[n.length-1],c=n[n.length-2];if((i.x-c.x)*(r.y-c.y)>=(i.y-c.y)*(r.x-c.x))n.pop();else break}n.push(r)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Ne=W,Ae=z,Oe=$,Me=B,_e=V,je=X;function De({delayDuration:e=0,...t}){return p.jsx(Ne,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Ue({...e}){return p.jsx(De,{children:p.jsx(Ae,{"data-slot":"tooltip",...e})})}function Fe({...e}){return p.jsx(Oe,{"data-slot":"tooltip-trigger",...e})}function Ge({className:e,sideOffset:t=0,children:n,...o}){return p.jsx(Me,{children:p.jsxs(_e,{"data-slot":"tooltip-content",sideOffset:t,className:K("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...o,children:[n,p.jsx(je,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}export{L as P,De as T,Ue as a,Fe as b,Ge as c};
